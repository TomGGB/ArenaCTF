<!-- Challenge Header -->
<h2 class="text-2xl font-gaming font-bold text-success mb-4">{{ challenge.title }}</h2>

<!-- Challenge Info -->
<div class="alert mb-4 text-sm">
    <div class="flex flex-wrap gap-3">
        <span><strong>CategorÃ­a:</strong> {{ challenge.category.icon }} {{ challenge.category.name }}</span>
        <span><strong>Puntos:</strong> {{ challenge.points }}</span>
        <span><strong>Resoluciones:</strong> {{ solve_count }}</span>
    </div>
</div>

<!-- Description -->
<div class="card bg-base-200 mb-4">
    <div class="card-body p-4">
        <h3 class="font-gaming font-semibold text-base mb-2">DescripciÃ³n</h3>
        <p class="text-sm leading-relaxed">{{ challenge.description }}</p>
    </div>
</div>

<!-- File Download -->
{% if challenge.files %}
<div class="mb-4">
    <a href="{{ challenge.files.url }}" download 
       class="btn btn-secondary btn-sm gap-2">
        <i class="fas fa-download"></i>
        Descargar archivos
    </a>
</div>
{% endif %}

<!-- Hints -->
{% if challenge.hints %}
<div class="collapse collapse-arrow bg-base-200 mb-4">
    <input type="checkbox" /> 
    <div class="collapse-title font-gaming font-semibold text-sm">
        ðŸ’¡ Pistas
    </div>
    <div class="collapse-content"> 
        <p class="text-sm leading-relaxed pt-2">{{ challenge.hints }}</p>
    </div>
</div>
{% endif %}

<!-- Flag Submission or Solved Message -->
{% if not solved %}
<form id="flagForm-{{ challenge.id }}" class="space-y-3" onsubmit="return false;">
    {% csrf_token %}
    <div class="form-control">
        <input type="text" id="flagInput-{{ challenge.id }}" name="flag" placeholder="flag{...}" required 
               class="input input-bordered input-success w-full font-mono">
    </div>
    <button type="button" onclick="submitFlag(event, '{{ challenge.id }}')" class="btn btn-success w-full font-gaming">
        Enviar Flag
    </button>
</form>

<div id="flagResult" class="mt-3"></div>
{% else %}
<div class="alert alert-success">
    <span class="font-gaming">âœ“ Ya resolviste este challenge!</span>
</div>
{% endif %}
